<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACUARIO VALPARA√çSO POS</title>
    <!-- React y Babel para ejecuci√≥n en el navegador -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; overflow: hidden; background-color: #f8fafc; }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #0ea5e9; border-radius: 10px; }
        .animate-fade { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Componente de Iconos SVG manuales para evitar errores de librer√≠as externas
        const Icon = ({ name, size = 24, className = "" }) => {
            const icons = {
                Waves: <path d="M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"/>,
                ShoppingCart: <path d="m3 3 3 .5m0 0L8 13h10l2-7H6.5M16 19a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM9 19a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/>,
                Compass: <circle cx="12" cy="12" r="10"/><path d="m16.2 7.8-2 7.4-7.4 2 2-7.4 7.4-2Z"/>,
                History: <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8m0 0V3m0 5h5M12 7v5l4 2"/>,
                BarChart3: <path d="M3 20h18M7 16V8M11 16V4M15 16V10M19 16v-4"/>,
                Trash2: <path d="M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2M10 11v6M14 11v6"/>,
                Plus: <path d="M12 5v14M5 12h14"/>,
                Minus: <path d="M5 12h14"/>,
                Search: <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>,
                Ticket: <path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"/>,
                Gift: <rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8V3M11.5 3a2.5 2.5 0 1 0-5 0c0 1.3 1.2 2 2.5 2.5ZM12.5 3a2.5 2.5 0 1 1 5 0c0 1.3-1.2 2-2.5 2.5ZM19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/>,
                Utensils: <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/>,
                Anchor: <path d="M12 5V2M12 22c5.5 0 10-4.5 10-10h-2a8 8 0 0 1-16 0H2c0 5.5 4.5 10 10 10Zm0-15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>,
                MessageCircle: <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 1 1-7.6-11.7c1.1 0 2.1.2 3.1.6l4.4-1.1-1.1 4.4a8.38 8.38 0 0 1 .1 4Z"/>,
                X: <path d="M18 6 6 18M6 6l12 12"/>,
                Clock: <circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const INITIAL_PRODUCTS = [
            { id: 1, name: "Entrada General Adulto", price: 4900, category: "Entradas", color: "bg-sky-50", icon: "Ticket" },
            { id: 2, name: "Entrada Ni√±o (2-12 a√±os)", price: 3900, category: "Entradas", color: "bg-sky-50", icon: "Ticket" },
            { id: 3, name: "Adulto Mayor (60+)", price: 3900, category: "Entradas", color: "bg-sky-50", icon: "Ticket" },
            { id: 4, name: "Entrada Convenio BCI", price: 3675, category: "Entradas", color: "bg-cyan-50", icon: "Ticket" },
            { id: 5, name: "Peluche Tibur√≥n Blanco XL", price: 12000, category: "Zoovenir", color: "bg-blue-50", icon: "Gift" },
            { id: 6, name: "Gorra Acuario Valpo", price: 6500, category: "Zoovenir", color: "bg-blue-50", icon: "Gift" },
            { id: 7, name: "Llavero Estrella de Mar", price: 2500, category: "Zoovenir", color: "bg-blue-50", icon: "Gift" },
            { id: 11, name: "Combo Fish & Chips", price: 7500, category: "Comida", color: "bg-teal-50", icon: "Utensils" },
            { id: 13, name: "Bebida Oc√©ano 500ml", price: 2000, category: "Comida", color: "bg-teal-50", icon: "Utensils" },
            { id: 14, name: "Helado Trit√≥n", price: 2500, category: "Comida", color: "bg-teal-50", icon: "Utensils" },
        ];

        const GUIDES = ["Gu√≠a Marina", "Gu√≠a Sebasti√°n", "Gu√≠a Javiera", "Gu√≠a Rodrigo", "Gu√≠a Ignacia"];

        const App = () => {
            const [currentView, setCurrentView] = useState('pos');
            const [activeCategory, setActiveCategory] = useState('Todas');
            const [cart, setCart] = useState([]);
            const [salesHistory, setSalesHistory] = useState([]);
            const [searchTerm, setSearchTerm] = useState('');
            const [isCheckoutOpen, setIsCheckoutOpen] = useState(false);
            const [paymentMethod, setPaymentMethod] = useState('efectivo');
            const [cashReceived, setCashReceived] = useState('');
            const [currentTime, setCurrentTime] = useState(new Date());
            const [selectedGuide, setSelectedGuide] = useState('');
            const [tourHistory, setTourHistory] = useState([]);

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            const filteredProducts = INITIAL_PRODUCTS.filter(p => 
                p.name.toLowerCase().includes(searchTerm.toLowerCase()) && 
                (activeCategory === 'Todas' || p.category === activeCategory)
            );

            const total = cart.reduce((acc, item) => acc + (item.price * item.quantity), 0);

            const productSalesReport = useMemo(() => {
                const report = {};
                INITIAL_PRODUCTS.forEach(p => report[p.id] = { ...p, soldCount: 0, revenue: 0 });
                salesHistory.forEach(sale => {
                    sale.items.forEach(item => {
                        if (report[item.id]) {
                            report[item.id].soldCount += item.quantity;
                            report[item.id].revenue += (item.price * item.quantity);
                        }
                    });
                });
                return Object.values(report).sort((a, b) => b.soldCount - a.soldCount);
            }, [salesHistory]);

            const addToCart = (product) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    if (existing) return prev.map(item => item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item);
                    return [...prev, { ...product, quantity: 1 }];
                });
            };

            const updateQuantity = (id, delta) => {
                setCart(prev => prev.map(item => 
                    item.id === id ? { ...item, quantity: Math.max(0, item.quantity + delta) } : item
                ).filter(i => i.quantity > 0));
            };

            const removeFromCart = (id) => {
                setCart(prev => prev.filter(item => item.id !== id));
            };

            const finalizeSale = () => {
                const newSale = {
                    id: `AV-${Date.now().toString().slice(-6)}`,
                    time: new Date().toLocaleTimeString(),
                    items: [...cart],
                    total,
                    method: paymentMethod
                };
                setSalesHistory([newSale, ...salesHistory]);
                setCart([]); setIsCheckoutOpen(false); setCashReceived('');
            };

            const handleCreateTour = () => {
                if (!selectedGuide) return;
                const now = new Date();
                const ms = 1000 * 60 * 5;
                const roundedDate = new Date(Math.round(now.getTime() / ms) * ms);
                const tourDate = new Date(roundedDate.getTime() + 15 * 60000);
                const tourTime = tourDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

                setTourHistory([{ id: Date.now(), guide: selectedGuide, time: tourTime, created: now.toLocaleTimeString() }, ...tourHistory]);
                const msg = `üåä *ACUARIO VALPARA√çSO*: Nuevo recorrido programado a las ${tourTime} con ${selectedGuide}.`;
                window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
            };

            const formatMoney = (v) => new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', minimumFractionDigits: 0 }).format(v);

            return (
                <div className="flex h-screen overflow-hidden text-slate-900 bg-slate-50">
                    {/* Barra Lateral Mar√≠tima */}
                    <aside className="w-20 lg:w-64 bg-[#001d3d] text-white flex flex-col shrink-0 border-r border-blue-900 shadow-xl z-20">
                        <div className="p-4 lg:p-6 mb-4 flex items-center gap-3">
                            <div className="bg-sky-500 p-2 rounded-xl shadow-lg"><Icon name="Waves" size={24} /></div>
                            <div className="hidden lg:block">
                                <h1 className="font-black text-sm uppercase leading-none tracking-tighter">Acuario <span className="text-sky-400">Valpo</span></h1>
                                <span className="text-[10px] text-sky-300 uppercase tracking-widest font-bold">Terminal POS</span>
                            </div>
                        </div>
                        <nav className="flex-1 px-2 lg:px-4 space-y-2">
                            <button onClick={() => setCurrentView('pos')} className={`w-full flex items-center justify-center lg:justify-start gap-4 p-4 rounded-2xl transition-all ${currentView === 'pos' ? 'bg-sky-600 text-white shadow-lg shadow-sky-900/40' : 'hover:bg-slate-800 text-slate-400'}`}>
                                <Icon name="ShoppingCart" size={22} /><span className="hidden lg:block font-bold text-sm">Vender</span>
                            </button>
                            <button onClick={() => setCurrentView('tours')} className={`w-full flex items-center justify-center lg:justify-start gap-4 p-4 rounded-2xl transition-all ${currentView === 'tours' ? 'bg-sky-600 text-white shadow-lg shadow-sky-900/40' : 'hover:bg-slate-800 text-slate-400'}`}>
                                <Icon name="Compass" size={22} /><span className="hidden lg:block font-bold text-sm">Recorridos</span>
                            </button>
                            <button onClick={() => setCurrentView('history')} className={`w-full flex items-center justify-center lg:justify-start gap-4 p-4 rounded-2xl transition-all ${currentView === 'history' ? 'bg-sky-600 text-white shadow-lg shadow-sky-900/40' : 'hover:bg-slate-800 text-slate-400'}`}>
                                <Icon name="History" size={22} /><span className="hidden lg:block font-bold text-sm">Ventas</span>
                            </button>
                            <button onClick={() => setCurrentView('reports')} className={`w-full flex items-center justify-center lg:justify-start gap-4 p-4 rounded-2xl transition-all ${currentView === 'reports' ? 'bg-sky-600 text-white shadow-lg shadow-sky-900/40' : 'hover:bg-slate-800 text-slate-400'}`}>
                                <Icon name="BarChart3" size={22} /><span className="hidden lg:block font-bold text-sm">Reportes</span>
                            </button>
                        </nav>
                        <div className="p-4 lg:p-6 mt-auto border-t border-blue-900/50 flex items-center gap-3">
                            <Icon name="Anchor" size={18} className="text-sky-400" />
                            <span className="text-[10px] font-black uppercase hidden lg:block text-sky-200">Puerto Valpara√≠so</span>
                        </div>
                    </aside>

                    {/* Contenido Principal */}
                    <main className="flex-1 flex flex-col overflow-hidden">
                        <header className="h-16 bg-white border-b flex items-center justify-between px-6 shrink-0 shadow-sm z-10">
                            <div className="bg-sky-50 px-4 py-1.5 rounded-full text-sky-600 border border-sky-100 text-xs font-bold font-mono">
                                {currentTime.toLocaleTimeString()}
                            </div>
                            <div className="text-[10px] font-black text-slate-400 uppercase tracking-widest hidden sm:block">Acuario Valpara√≠so POS v2.0</div>
                        </header>

                        <div className="flex-1 overflow-hidden">
                            {currentView === 'pos' && (
                                <div className="flex h-full flex-col lg:flex-row animate-fade">
                                    {/* Cat√°logo */}
                                    <div className="flex-1 p-4 lg:p-6 overflow-y-auto custom-scrollbar bg-slate-50/50">
                                        <div className="flex flex-col md:flex-row gap-4 mb-6">
                                            <div className="relative flex-1">
                                                <Icon name="Search" className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={18} />
                                                <input type="text" placeholder="Buscar producto..." className="w-full pl-10 pr-4 py-3 bg-white border rounded-2xl text-sm outline-none focus:border-sky-500 shadow-sm transition-all" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} />
                                            </div>
                                            <div className="flex gap-1 overflow-x-auto p-1 bg-white border rounded-2xl shadow-sm no-scrollbar">
                                                {['Todas', 'Entradas', 'Zoovenir', 'Comida'].map(cat => (
                                                    <button key={cat} onClick={() => setActiveCategory(cat)} className={`px-4 py-1.5 rounded-xl text-[10px] font-black uppercase transition-all whitespace-nowrap ${activeCategory === cat ? 'bg-sky-600 text-white shadow-md' : 'text-slate-400 hover:bg-slate-50'}`}>{cat}</button>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 pb-20">
                                            {filteredProducts.map(p => (
                                                <button key={p.id} onClick={() => addToCart(p)} className={`${p.color} p-5 rounded-[2.5rem] border-2 border-transparent hover:border-sky-300 transition-all flex flex-col justify-between h-48 text-left shadow-sm hover:shadow-xl active:scale-95 group`}>
                                                    <div className="bg-white/90 p-2 rounded-xl text-sky-700 w-fit shadow-sm"><Icon name={p.icon} size={20} /></div>
                                                    <div>
                                                        <p className="text-[8px] font-black uppercase text-sky-400 leading-none">{p.category}</p>
                                                        <h3 className="font-extrabold text-slate-800 text-xs my-1 leading-tight">{p.name}</h3>
                                                        <p className="text-sky-700 font-black text-lg group-hover:text-sky-900 transition-colors">{formatMoney(p.price)}</p>
                                                    </div>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* Carrito Lateral */}
                                    <div className="w-full lg:w-[400px] bg-white border-l flex flex-col shadow-2xl shrink-0">
                                        <div className="p-5 border-b flex justify-between items-center bg-sky-50/20">
                                            <h2 className="font-black text-xl flex items-center gap-2 text-sky-900 uppercase tracking-tighter"><Icon name="ShoppingCart" size={20} /> Pedido</h2>
                                            <button onClick={() => setCart([])} className="text-[10px] font-black text-red-400 uppercase tracking-widest hover:text-red-600 transition-colors">Vaciar</button>
                                        </div>
                                        <div className="flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50/30 custom-scrollbar">
                                            {cart.map(item => (
                                                <div key={item.id} className="bg-white p-4 rounded-2xl border flex items-center gap-3 shadow-sm hover:border-sky-100 transition-all animate-fade">
                                                    <div className="flex-1 leading-tight">
                                                        <p className="text-sm font-black text-slate-800">{item.name}</p>
                                                        <p className="text-[10px] text-sky-400 uppercase font-bold mt-1">{formatMoney(item.price)}</p>
                                                    </div>
                                                    <div className="flex items-center bg-slate-100 rounded-xl p-1 border">
                                                        <button onClick={() => updateQuantity(item.id, -1)} className="p-1.5 text-slate-400 hover:text-sky-600"><Icon name="Minus" size={14}/></button>
                                                        <span className="w-7 text-center text-[11px] font-black">{item.quantity}</span>
                                                        <button onClick={() => updateQuantity(item.id, 1)} className="p-1.5 text-slate-400 hover:text-sky-600"><Icon name="Plus" size={14}/></button>
                                                    </div>
                                                    <button onClick={() => removeFromCart(item.id)} className="text-red-300 hover:text-red-500 p-1.5 transition-colors"><Icon name="Trash2" size={18}/></button>
                                                </div>
                                            ))}
                                            {cart.length === 0 && (
                                                <div className="h-full flex flex-col items-center justify-center text-slate-200 py-20 opacity-50">
                                                    <Icon name="ShoppingCart" size={48} className="mb-4 opacity-20" />
                                                    <p className="font-black text-[10px] uppercase tracking-widest text-center">Sin Productos</p>
                                                </div>
                                            )}
                                        </div>
                                        <div className="p-8 bg-[#001d3d] text-white rounded-t-[3rem] shadow-2xl">
                                            <div className="flex justify-between items-center mb-6 px-2">
                                                <span className="text-xs font-black text-sky-400 uppercase tracking-widest">Total a Cobrar</span>
                                                <span className="text-4xl font-black tracking-tighter">{formatMoney(total)}</span>
                                            </div>
                                            <button onClick={() => setIsCheckoutOpen(true)} disabled={cart.length === 0} className="w-full bg-sky-500 hover:bg-sky-400 text-white py-5 rounded-[2rem] font-black text-lg uppercase tracking-widest shadow-xl transition-all disabled:opacity-50 disabled:bg-slate-700 active:scale-95">COBRAR VENTA</button>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentView === 'tours' && (
                                <div className="flex-1 p-6 lg:p-10 overflow-y-auto bg-sky-50/20 custom-scrollbar animate-fade">
                                    <div className="max-w-4xl mx-auto space-y-8">
                                        <h2 className="text-3xl font-black text-slate-900 uppercase tracking-tighter">Gesti√≥n de Recorridos</h2>
                                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                            <div className="bg-white p-8 rounded-[3rem] border shadow-xl border-blue-50">
                                                <label className="block text-[10px] font-black text-slate-400 uppercase mb-6 text-center tracking-widest leading-none">Seleccionar Gu√≠a Encargado</label>
                                                <div className="grid grid-cols-1 gap-2 mb-8">
                                                    {GUIDES.map(g => (
                                                        <button key={g} onClick={() => setSelectedGuide(g)} className={`p-4 rounded-xl text-xs font-bold border-2 transition-all ${selectedGuide === g ? 'bg-sky-50 border-sky-500 text-sky-700 shadow-md scale-[1.02]' : 'bg-slate-50 border-transparent text-slate-400 hover:bg-slate-100'}`}>{g}</button>
                                                    ))}
                                                </div>
                                                <button onClick={handleCreateTour} disabled={!selectedGuide} className="w-full bg-emerald-600 hover:bg-emerald-500 text-white py-5 rounded-[2rem] font-black flex items-center justify-center gap-3 active:scale-95 transition-all shadow-lg shadow-emerald-100 uppercase tracking-widest text-sm"><Icon name="MessageCircle" size={22} /> Notificar WhatsApp</button>
                                            </div>
                                            <div className="space-y-4">
                                                <h3 className="font-black uppercase text-[10px] text-slate-400 ml-4 tracking-widest">Hoy (+15min redondeado)</h3>
                                                <div className="space-y-3">
                                                    {tourHistory.map(t => (
                                                        <div key={t.id} className="bg-white p-6 rounded-[2.5rem] border flex items-center justify-between shadow-md border-sky-50 animate-fade">
                                                            <div className="bg-sky-50 text-sky-600 p-5 rounded-3xl font-black text-2xl shadow-inner border border-sky-100">{t.time}</div>
                                                            <div className="text-right">
                                                                <p className="font-black text-slate-800 text-lg uppercase leading-none mb-1 tracking-tighter">{t.guide}</p>
                                                                <p className="text-[9px] font-black text-sky-400 uppercase tracking-widest italic leading-none tracking-widest">En preparaci√≥n</p>
                                                            </div>
                                                        </div>
                                                    ))}
                                                    {tourHistory.length === 0 && <div className="p-20 text-center text-slate-300 font-black uppercase text-xs border-2 border-dashed rounded-[3rem] bg-white/50">Sin programas activos</div>}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentView === 'history' && (
                                <div className="flex-1 p-6 lg:p-10 overflow-y-auto custom-scrollbar animate-fade">
                                    <div className="max-w-3xl mx-auto space-y-4">
                                        <h2 className="text-3xl font-black text-slate-900 uppercase tracking-tighter mb-8 text-center lg:text-left">Bit√°cora de Ventas</h2>
                                        <div className="space-y-3">
                                            {salesHistory.map(s => (
                                                <div key={s.id} className="bg-white p-6 rounded-[2.5rem] border flex items-center justify-between shadow-sm hover:border-sky-200 transition-all group animate-fade">
                                                    <div className="flex items-center gap-6">
                                                        <div className="w-12 h-12 bg-sky-50 text-sky-600 rounded-2xl flex items-center justify-center font-black text-[10px] shadow-sm border border-sky-100">POS</div>
                                                        <div>
                                                            <p className="text-sm font-black text-slate-800 leading-none mb-1 uppercase tracking-tight">{s.id}</p>
                                                            <p className="text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none">{s.time} ‚Ä¢ {s.method.toUpperCase()}</p>
                                                        </div>
                                                    </div>
                                                    <p className="text-2xl font-black text-sky-800 tabular-nums tracking-tight">{formatMoney(s.total)}</p>
                                                </div>
                                            ))}
                                            {salesHistory.length === 0 && <div className="p-20 text-center text-slate-300 font-black uppercase italic text-sm">No hay ventas registradas hoxe</div>}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {currentView === 'reports' && (
                                <div className="flex-1 p-6 lg:p-10 overflow-y-auto custom-scrollbar animate-fade">
                                    <div className="max-w-4xl mx-auto space-y-10">
                                        <h2 className="text-4xl font-black text-slate-900 uppercase tracking-tighter text-center leading-none">Informe de Inventario</h2>
                                        <div className="bg-white rounded-[3rem] border overflow-hidden shadow-2xl border-blue-50 border-slate-200">
                                            <table className="w-full text-left">
                                                <thead className="bg-slate-50 border-b font-black text-[10px] text-slate-400 uppercase tracking-widest">
                                                    <tr>
                                                        <th className="p-8">Producto</th>
                                                        <th className="p-8 text-center">Unds.</th>
                                                        <th className="p-8 text-right">Recaudaci√≥n</th>
                                                    </tr>
                                                </thead>
                                                <tbody className="divide-y divide-slate-50">
                                                    {productSalesReport.map(p => (
                                                        <tr key={p.id} className={`${p.soldCount > 0 ? 'bg-white font-bold' : 'opacity-30'}`}>
                                                            <td className="p-8 text-sm font-bold uppercase tracking-tight">{p.name}</td>
                                                            <td className="p-8 text-center font-black text-3xl text-sky-600">{p.soldCount}</td>
                                                            <td className="p-8 text-right text-sm font-bold text-slate-500 tracking-tighter">{formatMoney(p.revenue)}</td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </main>

                    {/* M√≥dulo de Cobro Modal */}
                    {isCheckoutOpen && (
                        <div className="fixed inset-0 bg-[#001d3d]/95 backdrop-blur-xl z-[100] flex items-center justify-center p-4">
                            <div className="bg-white w-full max-w-sm rounded-[4rem] shadow-2xl overflow-hidden animate-fade">
                                <div className="p-10 text-center bg-[#001d3d] text-white relative">
                                    <button onClick={() => setIsCheckoutOpen(false)} className="absolute top-8 right-8 text-slate-400 hover:text-white transition-colors"><Icon name="X" size={24} /></button>
                                    <p className="text-sky-400 text-[10px] font-black uppercase mb-3 tracking-[0.2em]">Resumen de Cobro</p>
                                    <h3 className="text-6xl font-black tracking-tighter">{formatMoney(total)}</h3>
                                </div>
                                <div className="p-10 space-y-8 text-center">
                                    <div className="flex gap-3">
                                        <button onClick={() => setPaymentMethod('efectivo')} className={`flex-1 p-5 rounded-3xl border-2 transition-all font-black uppercase text-[10px] ${paymentMethod === 'efectivo' ? 'bg-sky-50 border-sky-500 text-sky-700 shadow-md' : 'text-slate-300 border-transparent bg-slate-50'}`}>Efectivo</button>
                                        <button onClick={() => setPaymentMethod('debito')} className={`flex-1 p-5 rounded-3xl border-2 transition-all font-black uppercase text-[10px] ${paymentMethod === 'debito' ? 'bg-blue-50 border-blue-500 text-blue-700 shadow-md' : 'text-slate-300 border-transparent bg-slate-50'}`}>D√©bito</button>
                                    </div>
                                    
                                    {paymentMethod === 'efectivo' && (
                                        <div className="space-y-4 animate-fade">
                                            <label className="block text-[10px] font-black text-slate-400 text-center uppercase tracking-widest leading-none">Efectivo Recibido</label>
                                            <input type="number" className="w-full bg-slate-100 border-none p-6 rounded-[2rem] text-4xl font-black text-center outline-none focus:ring-4 focus:ring-sky-500/20 shadow-inner" placeholder="0" value={cashReceived} onChange={e => setCashReceived(e.target.value)} autoFocus />
                                            <div className="p-6 rounded-3xl bg-emerald-50 text-center border-2 border-emerald-100 shadow-inner">
                                                <p className="text-emerald-700 font-black text-[10px] uppercase mb-1 tracking-widest leading-none">Cambio a Devolver</p>
                                                <p className="text-4xl font-black text-emerald-600 uppercase tabular-nums tracking-tighter">{formatMoney(Math.max(0, (parseFloat(cashReceived) || 0) - total))}</p>
                                            </div>
                                        </div>
                                    )}
                                    <div className="space-y-4 pt-4">
                                        <button onClick={finalizeSale} disabled={paymentMethod === 'efectivo' && (!cashReceived || parseFloat(cashReceived) < total)} className="w-full bg-sky-600 hover:bg-sky-500 text-white py-6 rounded-[2rem] font-black text-lg shadow-xl uppercase tracking-tighter transition-all active:scale-95 disabled:opacity-30 disabled:bg-slate-800 uppercase">Finalizar Venta</button>
                                        <button onClick={() => { setIsCheckoutOpen(false); setCashReceived(''); }} className="w-full text-slate-400 font-black uppercase text-[10px] text-center tracking-[0.2em] hover:text-slate-600 transition-colors uppercase leading-none">Cancelar Operaci√≥n</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
